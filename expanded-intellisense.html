<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monaco Editor - Auto-Expanded Suggestions</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #1e1e1e;
        }

        #container {
            width: 100%;
            height: 600px;
            border: 1px solid #3c3c3c;
            border-radius: 4px;
        }

        h1 {
            color: #cccccc;
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <h1>Monaco Editor - Auto-Triggered Expanded Suggestions</h1>
    <div id="container"></div>

    <script src="https://unpkg.com/monaco-editor@0.44.0/min/vs/loader.js"></script>
    <script>
        require.config({ paths: { vs: 'https://unpkg.com/monaco-editor@0.44.0/min/vs' } });

        require(['vs/editor/editor.main'], function () {
            // Register custom completion provider for markdown
            monaco.languages.registerCompletionItemProvider('markdown', {
                provideCompletionItems: function (model, position) {
                    const word = model.getWordUntilPosition(position);
                    const range = {
                        startLineNumber: position.lineNumber,
                        endLineNumber: position.lineNumber,
                        startColumn: word.startColumn,
                        endColumn: word.endColumn
                    };

                    const suggestions = [
                        {
                            label: 'hello',
                            kind: monaco.languages.CompletionItemKind.Keyword,
                            insertText: 'hello',
                            range: range,
                            documentation: {
                                value: `**Hello** - A friendly greeting\n\n---\n\n**Usage Examples:**\n- "Hello, world!" - The classic programming greeting\n- "Hello there!" - A casual greeting\n- "Hello everyone" - Group greeting\n\n**Etymology:** From Old English "hǣl" meaning "whole" or "healthy"\n\n**Related Phrases:**\n- Hello darkness, my old friend\n- Hello from the other side\n- Say hello to my little friend\n\n**Programming Context:**\nThe "Hello, World!" program is traditionally the first program written by students learning a new programming language.\n\n**Cultural Impact:**\nUsed in over 200 programming languages as the introductory example.`
                            },
                            detail: 'Greeting keyword - Auto-expanded documentation'
                        },
                        {
                            label: 'world',
                            kind: monaco.languages.CompletionItemKind.Keyword,
                            insertText: 'world',
                            range: range,
                            documentation: {
                                value: `**World** - The Earth and all its inhabitants\n\n---\n\n**Common Phrases:**\n- "Hello, world!" - Programming tradition\n- "World peace" - Global harmony\n- "Around the world" - Global journey\n- "World wide web" - The internet\n\n**Related Terms:** planet, earth, globe, universe, cosmos\n\n**Fun Facts:**\n- The "Hello, World!" program tradition started in 1972\n- World population is over 8 billion people\n- There are 195 countries in the world\n- Earth is 4.54 billion years old\n\n**In Different Languages:**\n- Spanish: mundo\n- French: monde\n- German: Welt\n- Japanese: 世界 (sekai)\n\n**Geography:**\nSurface area: 510.1 million km²\nOceans cover 71% of the surface`
                            },
                            detail: 'Global reference - Comprehensive auto-expanded docs'
                        }
                    ];

                    return { suggestions: suggestions };
                }
            });

            // Create the editor
            const editor = monaco.editor.create(document.getElementById('container'), {
                value: `# Auto-Expanded Suggestions Demo

Position your cursor after any letter below and suggestions will auto-appear with expanded details:

h
w

## Try It Out
- Position cursor after 'h' above
- Position cursor after 'w' above
- Suggestions appear automatically with expanded documentation

## Features
- Auto-triggered suggestions (no Ctrl+Space needed)
- **Auto-expanded documentation by default**
- Rich content with proper min-height
- Immediate visibility of all details

Type more letters to see the auto-complete in action:

`,
                language: 'markdown',
                theme: 'vs-dark',
                fontSize: 14,
                lineNumbers: 'on',
                wordWrap: 'on',
                minimap: { enabled: false },
                scrollBeyondLastLine: false,
                suggestOnTriggerCharacters: true,
                acceptSuggestionOnCommitCharacter: true,
                acceptSuggestionOnEnter: 'on',
                wordBasedSuggestions: true
            });

            let isProcessing = false;



            // Auto-resize editor on window resize
            window.addEventListener('resize', () => {
                editor.layout();
            });

            // Focus the editor and trigger initial suggestions
            editor.focus();

            //https://github.com/microsoft/monaco-editor/issues/2177
            editor.getContribution("editor.contrib.suggestController").widget.value._setDetailsVisible(true);


        });
    </script>
</body>

</html>